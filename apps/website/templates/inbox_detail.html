{% extends "base.html" %}

{% block title %}Inbox Item{% endblock %}

{% block content %}
<div class="fixed-content">
    <h1 class="mono">Inbox item #{{ inbox.id }}</h1>
    
    <table class="large">
        <tbody>
            <tr>
                <th>ID</th>
                <td class="mono">{{ inbox.id }}</td>
            </tr>
            <tr>
                <th>Content</th>
                <td class="emphasis">{{ inbox.content }}</td>
            </tr>
            <tr>
                <th>Created</th>
                <td>{{ inbox.created_at|date:"d.m.Y H:i" }}</td>
            </tr>
            <tr>
                <th>Status</th>
                <td>{% if inbox.processed %}✓ Processed{% else %}◯ Unprocessed{% endif %}</td>
            </tr>
            {% if inbox.processed_at %}
            <tr>
                <th>Processed</th>
                <td>{{ inbox.processed_at|date:"d.m.Y H:i" }}</td>
            </tr>
            {% endif %}
            {% if inbox.created_project %}
            <tr>
                <th>Created Project</th>
                <td>
                    <a href="{% url 'project_detail' inbox.created_project.id %}">
                        {{ inbox.created_project.title }}
                    </a>
                </td>
            </tr>
            {% endif %}
            {% if inbox.created_task %}
            <tr>
                <th>Created Task</th>
                <td>
                    {{ inbox.created_task.title }} 
                    (in <a href="{% url 'project_detail' inbox.created_task.project.id %}">{{ inbox.created_task.project.title }}</a>)
                </td>
            </tr>
            {% endif %}
        </tbody>
    </table>

    {% if not inbox.processed %}
    <h2>Process This Item</h2>
    <form action="{% url 'flow_page' %}" method="get">
        <button type="submit">Process Now</button>
    </form>
    {% endif %}

    <h2>Navigate</h2>
    <form action="{% url 'inbox_list' %}" method="get">
        <button type="submit">Back to Inbox</button>
    </form>
</div>
{% endblock %}